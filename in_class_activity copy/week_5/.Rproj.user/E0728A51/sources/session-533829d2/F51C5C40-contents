# Try three at doing analysis of compound words in R
# load quanteda family of packages
library(quanteda)
library(quanteda.dictionaries)
library(quanteda.textmodels)
library(quanteda.textplots)
library(quanteda.textstats)
library(forcats)

# load other libraries
library(readtext)
library(spacyr)
library(tidyverse)
library(dplyr)
library(SnowballC)

# define location of datafile
data_file <- "data/tc_journals.RData"

# load data
load(data_file)


# Making a corpus
title_corpus_compound_words <- corpus(tc_journals, text_field = "article_title")



# Making tokens
title_tokens_compound_words <- tokens(title_corpus_compound_words, remove_punct = TRUE,
                                      remove_separators = TRUE,
                                      remove_numbers = TRUE)

# Making a dfm
dfm_title_tokens

# quanteda does word stemming? dfms?
quanteda_approach_to_stemming <- dfm_wordstem(title_tokens_compound_words, language = "english")








# stemming
stemmed_words <- wordStem(title_tokens_compound_words, language = "en")

# re-tokenizing
stemmed_tokens <- tokens(stemmed_words, remove_punct = TRUE,
                         remove_separators = TRUE,
                         remove_numbers = TRUE)

# collocations
col <- stemmed_tokens %>% 
  tokens_select(pattern = "^[A-Z]", valuetype = "regex", 
                case_insensitive = TRUE, padding = TRUE) %>% 
  textstat_collocations(min_count = 15, tolower = TRUE)



